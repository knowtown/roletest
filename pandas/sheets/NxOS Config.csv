,hostname ,Unnamed: 1,"! Sets the device host name. This value is also used when generating crypto keys (along with the value in the ""ip domain-name"" command)."
0,,,
1,,removed feature telnet,
2,feature tacacs+,,! Enables TACACS+. We must enable this feature to set up AAA below.
3,cfs ipv4 distribute,this may error out,"! Cisco Fabric Services (CFS) is a Cisco proprietary feature that distributes data, including configuration changes, to all Cisco NX-OS devices in a network. You can use CFS to distribute and synchronize a configuration on one Cisco devicev or with all other Cisco devices in your network. CFS supports several types of distribution, such as CFS over Ethernet (CFSoE) and CFS over IP (CFSoIP). This command globally enables CFS distribution over IPv4 for all applications on the device."
4,cfs eth distribute,,"! Cisco Fabric Services (CFS) is a Cisco proprietary feature that distributes data, including configuration changes, to all Cisco NX-OS devices in a network. You can use CFS to distribute and synchronize a configuration on one Cisco devicev or with all other Cisco devices in your network. CFS supports several types of distribution, such as CFS over Ethernet (CFSoE) and CFS over IP (CFSoIP). This command globally enables CFS distribution over Ethernet for all applications on the device."
5,feature interface-vlan,,! Enables the creation of VLAN interfaces.
6,feature lacp,,"! Enables LACP on the switch. Link Aggregation Control Protocol (LACP) is an IEEE protocol for dynamically negotiating/creating port channels, as opposed to the Cisco-proprietary PaGP method."
7,feature vpc,,! Enables the vCP (virtual Port Channel) feature. A virtual PortChannel allows links that are physically connected to two different Cisco Nexus devices to appear as a single PortChannel to a third device (such as a Nexus 2000 (FEX)).
8,no feature vtp,,"! Disables the VTP feature. The VLAN Trunking Protocol (VTP) is a way to centrally manage VLANs by creating a VTP domain and allowing devices configured to join that VTP domain to share VLAN database information to dynamically keep their VLAN databases up-to-date. The risks of this protocol (e.g. VTP Wipeout) far outweigh the benefits, so we disable the protocol."
9,feature lldp,this will error out on a N5k,"! Enables LLDP. The Link Layer Discovery Protocol (LLDP) is a vendor-neutral device discovery protocol defined by the IEEE, as opposed to the Cisco-proprietary CDP method. LLDP is used to permit the discovery of non-Cisco devices."
10,!no feature telnet,"soon, soonâ€¦","! If ran, this disables telnet."
11,errdisable recovery interval 30,,"! This is the timer used by ""errdisable recovery"" command which is enabled by default in NX-OS (disabled by default in IOS). After each timer interval (in seconds), any errdisable ports will be enabled."
12,,,
13,no logging console,,! Here we want to avoid sending log messages to the console terminal.
14,logging logfile logfile.txt 7 size 2000000,,"! Configures the name of the log file used to store system messages and the minimum severity to log. Here, we will log everything from levels 0 - 7 (level 7 is debugging). We also specify a log file size."
15,logging server 158.139.170.25 use-vrf default,,"! Configures a syslog server at the specified hostname or IP address. You can limit logging of messages to a particular VRF (VPN Routing and Forwarding interface) by using the ""use-vrf"" keyword. Here, the VRF specified is ""default""."
16,logging server 158.139.2.218 use-vrf default,,"! Configures a syslog server at the specified hostname or IP address. You can limit logging of messages to a particular VRF (VPN Routing and Forwarding interface) by using the ""use-vrf"" keyword. Here, the VRF specified is ""default""."
17,!,,"! DMZ - Configures a syslog server at the specified hostname or IP address. You can limit logging of messages to a particular VRF (VPN Routing and Forwarding interface) by using the ""use-vrf"" keyword. Here, the VRF specified is ""default""."
18,!,,
19,!,,
20,!,,
21,logging source-interface ,this will error out on a N5k,! Specifies a source interface to use for sending syslog messages.
22,logging timestamp milliseconds,,! Sets the logging time-stamp units to milliseconds.
23,,,
24,username admin password 5 XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX role network-admin,,"! Creates a user with a password, and assigns them a NS-OS User Role. In regular IOS, we have privilege levels 0-15 to define user access. In NX-OS, a different concept (""User Roles"") is used with the same purpose. Some examples of default NX-OS roles are ""network-admin"" (full RW to the entire NX-OS device) and ""network-operator"" (full RO to the entire NX-OS device). User Roles are local to a switch and only relevant in the absence of AAA Authorization configuration. Since below we configure AAA Authorization, we rely on TACACS to assign a Role to the user after authentication. However, if AAA authentication were to be unavailable (as we define below in our AAA setup), the local user accounts would be used, so configuring these user accounts with a network-admin role is a good way to guarantee access into a system in the absense of any TACACS server."
25,username tombstone password 5 XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX role network-admin,,"! Creates a user with a password, and assigns them a NS-OS User Role. In regular IOS, we have privilege levels 0-15 to define user access. In NX-OS, a different concept (""User Roles"") is used with the same purpose. Some examples of default NX-OS roles are ""network-admin"" (full RW to the entire NX-OS device) and ""network-operator"" (full RO to the entire NX-OS device). User Roles are local to a switch and only relevant in the absence of AAA Authorization configuration. Since below we configure AAA Authorization, we rely on TACACS to assign a Role to the user after authentication. However, if AAA authentication were to be unavailable (as we define below in our AAA setup), the local user accounts would be used, so configuring these user accounts with a network-admin role is a good way to guarantee access into a system in the absense of any TACACS server."
26,,,
27,clock timezone CST -6 0,,! Configures the time zone offset from UTC.
28,clock summer-time CDT 2 sun mar 02:00 1 sun nov 02:00 60,,"! Configures the system to switch automatically to summer time (daylight savings time). The name of the time zone is given, followed by a number and a day (e.g. the 2nd Sunday, or the ""last"" or ""first"" Sunday) and then the month and time of day. The trailing ""60"" is the offset time in minutes, i.e. when we start/stop daylight savings time, how many minutes should the system add/remove from the clock. In our case daylight savings time adds/removes 1 hour from the clock, so we put 60 minutes here."
29,ntp source-interface ,,! Specifies a source interface for NTP.
30,,,
31,"tacacs-server key 7 ""XXXXXXXXXXX""",,"! Configures a global TACACS+ shared secret key, which is used to authenticate the switch to the TACACS+ server."
32,!,,"! Specifies the security protocol to use with AAA (TACACS+), as well as the IP address of the host maintaining a TACACS+ server. The TACACS+ software searches for the hosts in the order specified, allowing us to set up a server list by preference."
33,!,,"! Specifies the security protocol to use with AAA (TACACS+), as well as the IP address of the host maintaining a TACACS+ server. The TACACS+ software searches for the hosts in the order specified, allowing us to set up a server list by preference."
34,!,,"! Specifies the security protocol to use with AAA (TACACS+), as well as the IP address of the host maintaining a TACACS+ server. The TACACS+ software searches for the hosts in the order specified, allowing us to set up a server list by preference."
35,!,,
36,!,,
37,!,,
38,!,,
39,aaa group server tacacs+ TACSERVERS,,"! Creates a TACACS+ server group and enters the TACACS+ server group configuration mode for that group. The next commands we enter will configure this server group. This server group can be used in other AAA commands to define remote AAA servers to use for authentication, authorization, or accounting. Note that the servers are tried in the same order in which you configure them, and the server group only takes effect when you apply it to a AAA service."
40, server 155.191.182.137,,! In config mode for the TACACS+ server group TACSERVERS we just created. This defines a TACACS+ server for the server group. Remember the servers are tried in the order they are entered.
41, server 158.139.170.16,,! In config mode for the TACACS+ server group TACSERVERS we just created. This defines a TACACS+ server for the server group. Remember the servers are tried in the order they are entered.
42, server 10.26.60.20,,! In config mode for the TACACS+ server group TACSERVERS we just created. This defines a TACACS+ server for the server group. Remember the servers are tried in the order they are entered.
43, source-interface ,,! In config mode for the TACACS+ server group TACSERVERS we just created. This defines the source interface to use for TACACS+.
44,aaa authentication login default group TACSERVERS ,,"! Configures the default authentication method. Here, we're using the server group we defined above called TACSERVERS. Note that the ""local"" keyword is not supported (and is not required) when configuring AAA authentication groups because local authentication is the default if remote servers are unreachable."
45,aaa authorization config-commands default group TACSERVERS local ,,"! Configuring default authorization parameters. This command enables the authorization of all configuration commands, including global configuration commands. So any time such a command is ran, authorization is performed against the listed server group and the command is allowed or denied based on the server response. The local keyword specifies that local authorization will be used if all the configured server groups fail to respond."
46,aaa authorization commands default group TACSERVERS local ,,"! Configuring default authorization parameters. This command enables the authorization of all EXEC mode commands, including global configuration commands. So any time such a command is ran, authorization is performed against the listed server group and the command is allowed or denied based on the server response. The local keyword specifies that local authorization will be used if all the configured server groups fail to respond."
47,aaa accounting default group TACSERVERS ,,"! Configures the default accounting method. Here we're using the server group we defined above called TACSERVERS. The default method is local, which is used when no server groups are configured OR when all the configured server groups fail to respond."
48,,,
49,,,
50,,,
51,ip domain-lookup,,! Enables the DNS lookup feature (basically enables DNS).
52,ip domain-list conocophillips.net,,"! Adds an entry to the DNS suffix list. The suffix list is tried first in a name lookup, i.e. entries in the suffix list will be appended to the DNS query first, then if unresolved, the original DNS query will be attempted as is."
53,ip domain-list conoco.net,,"! Adds an entry to the DNS suffix list. The suffix list is tried first in a name lookup, i.e. entries in the suffix list will be appended to the DNS query first, then if unresolved, the original DNS query will be attempted as is."
54,,,
55,ip name-server 155.191.182.135,,! Specifies the primary DNS server for name lookups
56,ip name-server 158.139.212.31,,! Specifies the secondary DNS server for name lookups
57,!,,! Specifies the tertiary DNS server for name lookups
58,,,
59,snmp-server location Bartlesville,,! Sets the SNMP system location string
60,snmp-server chassis-id ,,"! Sets the chassis ID number (serial number) that is available via SNMP. This may or may not match the actual serial number of the router, since this is a user-entered value."
61,snmp-server ifindex persist,,"! SNMP IfIndex OID preservation when rebooted. Ignore if IOS doesn't support it. The term Ifindex refers to the ""interface index"" which is a unique index number assigned to each interface. Normally these index numbers can change after a reboot, reload, etc. Thus, if a management application was polling a router's ifindex 3, which happened to be a Gigabit port, and then after a reboot the ifindex of 3 was assigned to the serial port on that router, the management application would end up monitoring the wrong port (it would have needed to be warned via a trap that the router rebooted). Thankfully, Cisco provides support for ifindex values to persist across reboots. This command is used to enable ifindex persistence on a specific interface or servicve instance, as opposed to the above ""snmp ifmib ifindex persist"" command, which globally enables ifindex persistence."
62,snmp-server enable traps,,! Enables the router to send SNMP traps.
63,snmp-server source-interface trap ,,! Configures a source interface for sending out SNMPv2c traps or informs.
64,,,
65,snmp-server host 158.139.195.19 traps version 2c XXXXXXXXXXX,,"! Configures a host receiver for SNMPv2c traps or informs. The community string is specified after the ""version"" argument."
66,snmp-server host 158.139.195.20 traps version 2c XXXXXXXXXXX,,"! Configures a host receiver for SNMPv2c traps or informs. The community string is specified after the ""version"" argument."
67,snmp-server host 158.139.170.25 traps version 2c XXXXXXXXXXX ,,"! Configures a host receiver for SNMPv2c traps or informs. The community string is specified after the ""version"" argument."
68,snmp-server host 158.139.2.218 traps version 2c XXXXXXXXXXX ,,"! Configures a host receiver for SNMPv2c traps or informs. The community string is specified after the ""version"" argument."
69,!,,"! DMZ - Configures a host receiver for SNMPv2c traps or informs. The community string is specified after the ""version"" argument."
70,,,
71,snmp-server community XXXXXXXXXXX group network-admin,,"! In regular IOS, we have privilege levels 0-15 to define user access. In NX-OS, a different concept (""User Roles"") is used with the same purpose. Some examples of default NX-OS roles are ""network-admin"" (full RW to the entire NX-OS device) and ""network-operator"" (full RO to the entire NX-OS device). SNMP also uses these roles to define access, with the excecption that the roles are referred to as ""groups"" in SNMP. Thus, each group in SNMP is similar to a role through the CLI. Each SNMP group is defined with three accesses: read access, write access, and notification access. Each access can be enabled or disabled within each group. Therefore, by default, the network-operator ""group"" in SNMP is a Read-Only group, and the network-admin SNMP ""group"" is a Read-Write group."
72,snmp-server community XXXXXXXXXXX group network-operator,,"! In regular IOS, we have privilege levels 0-15 to define user access. In NX-OS, a different concept (""User Roles"") is used with the same purpose. Some examples of default NX-OS roles are ""network-admin"" (full RW to the entire NX-OS device) and ""network-operator"" (full RO to the entire NX-OS device). SNMP also uses these roles to define access, with the excecption that the roles are referred to as ""groups"" in SNMP. Thus, each group in SNMP is similar to a role through the CLI. Each SNMP group is defined with three accesses: read access, write access, and notification access. Each access can be enabled or disabled within each group. Therefore, by default, the network-operator ""group"" in SNMP is a Read-Only group, and the network-admin SNMP ""group"" is a Read-Write group."
73,snmp-server community XXXXXXXXXXX group network-operator,,"! In regular IOS, we have privilege levels 0-15 to define user access. In NX-OS, a different concept (""User Roles"") is used with the same purpose. Some examples of default NX-OS roles are ""network-admin"" (full RW to the entire NX-OS device) and ""network-operator"" (full RO to the entire NX-OS device). SNMP also uses these roles to define access, with the excecption that the roles are referred to as ""groups"" in SNMP. Thus, each group in SNMP is similar to a role through the CLI. Each SNMP group is defined with three accesses: read access, write access, and notification access. Each access can be enabled or disabled within each group. Therefore, by default, the network-operator ""group"" in SNMP is a Read-Only group, and the network-admin SNMP ""group"" is a Read-Write group."
74,snmp-server community XXXXXXXXXXX use-acl 67,,! Assigns an IPv4 ACL to an SNMPv2 community to filter SNMP requests.
75,snmp-server community XXXXXXXXXXX use-acl 66,,! Assigns an IPv4 ACL to an SNMPv2 community to filter SNMP requests.
76,snmp-server community XXXXXXXXXXX use-acl 88,,! Assigns an IPv4 ACL to an SNMPv2 community to filter SNMP requests.
77,snmp-server location Canada,,! Sets the SNMP system location string
78,,,
79,ip access-list 66,,! SNMP RO
80,permit ip 158.139.195.0/24 any,,! SNMP RO
81,permit ip 158.139.170.0/26 any,,! SNMP RO
82,permit ip 158.139.162.0/25 any,,! SNMP RO
83,permit ip 155.191.128.0/28 any,,! SNMP RO
84,permit ip 155.191.129.228/32 any,,! SNMP RO
85,permit ip 155.191.192.148/32 any,,! SNMP RO
86,permit ip 155.191.185.128/32 any,,! SNMP RO
87,permit ip 155.191.182.156/30 any,,! SNMP RO
88,permit ip 158.139.104.8/29 any,,! SNMP RO
89,permit ip 158.139.49.48/28 any,,! SNMP RO
90,permit ip 10.25.32.7/32 any,,! SNMP RO
91,permit ip 158.139.198.247/32 any,,! SNMP RO
92,permit ip 153.15.98.64/27 any,,
93,permit ip 158.139.2.192/26 any,,
94,permit ip 158.139.112.117/32 any,,
95,!,,
96,!,,
97,!,,
98,!,,
99,!,,
100,!,,
101,ip access-list 67,,! SNMP RW
102,permit ip 158.139.170.24/30 any,,! SNMP RW
103,permit ip 158.139.2.218/32 any,,
104,!,,
105,!,,
106,!,,
107,!,,
108,ip access-list 88,,"! This ACL 88 (barely used) is used by other devices when they need to use SNMP (like a non-Cisco device like Solarwinds or something like that needs to read SNMP on our switches/routers, we give them a separate SNMP RO string instead of our standard SNMP RO string, and then we tie that separate SNMP RO string to a separate ACL (so ACL 88 instead of ACL 66 which is our ""standard"" RO ACL). So we will set this ACL 88 by default to deny everything, and we can go back later on a per-device basis and add ""permits"" to/remove ""denies"" from this ACL as needed."
109,deny ip any any,,"! Since NXOS only has ""extended""-type ACL's, we can't do a generic ""deny any."" Instead we have to deny per protocol, so here we deny all IP, TCP, and UDP traffic."
110,deny tcp any any,,"! Since NXOS only has ""extended""-type ACL's, we can't do a generic ""deny any."" Instead we have to deny per protocol, so here we deny all IP, TCP, and UDP traffic."
111,deny udp any any,,"! Since NXOS only has ""extended""-type ACL's, we can't do a generic ""deny any."" Instead we have to deny per protocol, so here we deny all IP, TCP, and UDP traffic."
112,!,,
113,!,,
114,banner motd ^,,"! Define a banner to display to the user before login. The MOTD banner differs from the LOGIN banner that we have on the Switch and Router configs in that the MOTD banner is displayed to everyone who connects to the CLI, regardless of VTY Line config. Conversely, the LOGIN banner will be displayed to users on VTY lines only if a ""login"" command has been set on those VTY lines."
115,                        W A R N I N G !!!!!!!,,
116,,,
117,This is a private computer system to be accessed and used for,,
118,company business purposes.  All access to it must be specifically,,
119,authorized. Unauthorized access or use of this system is prohibited,,
120,and may expose you to liability under criminal and/or civil law.,,
121,,,
122,Unless provided for by a separate written agreement signed by the,,
123,"company, all information placed on this computer system is the",,
124,"property of the company. The company reserves the right to monitor,",,
125,"access, intercept, record, read, copy, capture and disclose all",,
126,"information received, sent through or stored in this computer",,
127,"system, without notice, for any purpose and at anytime.",,
128,,,
129,"By accessing, using and continuing to use this system, you agree to",,
130,"these terms of use, as the company may modify from time to time; you",,
131,agree to waive any right or expectation of privacy regarding this,,
132,system or your use of it; and you further warrant that you have,,
133,proper authorization to use this system.,,
134,,,
135,"                 IF YOU DO NOT AGREE, LOG OFF NOW.",,
136,^,,
137,,,
138,ntp server 155.191.128.133,,! Define a primary NTP server.
139,ntp server 155.191.128.134,,! Define a secondary NTP server.
140,ntp server 158.139.0.139,,
141,ntp server 158.139.0.137,,
142,ntp source-interface ,,! Specifies the source interface for NTP.
143,,,
144,line vty,,
145,exec-timeout 30,,"! Configure the inactive session timeout on the console port or the virtual terminal (format is minutes / seconds), i.e. how long the EXEC session will stay active once the user becomes idle."
